<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>  
    <title>Create Course</title>
</head>
<body>
    <form action="" id="create_course_form">
        <label for="course_name">Course Name</label><input type="text" name="course_name" id="course_name" placeholder="Enter course name"><br>

        <label for="course_description">Course Description</label><textarea name="course_description" id="course_description" placeholder="Enter course description"></textarea><br>

        <label for="start_datetime">Start Datetime</label><input type="text" name="start_datetime" id="start_datetime" placeholder="dd-mm-yyyy 00:00:00"><br>
        
        <label for="end_datetime">End Datetime</label><input type="text" name="end_datetime" id="end_datetime" placeholder="dd-mm-yyyy 00:00:00"><br>

        <label for="start_enrollment">Start Enrollment Datetime</label><input type="text" name="start_enrollment" id="start_enrollment" placeholder="dd-mm-yyyy 00:00:00"><br>

        <label for="end_enrollment">End Enrollment Datetime</label><input type="text" name="end_enrollment" id="end_enrollment" placeholder="dd-mm-yyyy 00:00:00"><br>

        <button type="submit">Create Course</button>
    </form>

    <script>
        create_course_form = document.getElementById("create_course_form")

        create_course_form.addEventListener('submit', function(event){
            event.preventDefault();
            send_application();
        })

        function send_application(){
            // add additional test cases later to check for missing values (or just do it in python)
            var course_name = document.getElementById("course_name").value
            var course_description = document.getElementById("course_description").value
            var start_datetime = document.getElementById("start_datetime").value
            var end_datetime = document.getElementById("end_datetime").value
            var start_enrollment = document.getElementById("start_enrollment").value
            var end_enrollment = document.getElementById("end_enrollment").value

            axios
            .post('http://localhost:5000/create_course',
                {
                    "user_id" : "1", // later on this will be replaced by windows session of the hr's logged in user id
                    "course_name": course_name,
                    "course_description": course_description,
                    "start_date": start_datetime,
                    "end_date": end_datetime,
                    "start_enrollment_date": start_enrollment,
                    "end_enrollment_date": end_enrollment
                }
            )
            .then(res =>
                {
                    data = res.data;
                    console.log(data)
                }
            )
        }

    </script>
        
</body>
</html>